project:
  name: fulcrum_custom_shipping

application:
  hooks:
    pre-app-build: ./hooks/pre-app-build.js
  actions: actions
  runtimeManifest:
    packages:
      application:
        license: Apache-2.0
        actions:
          shipping-methods:
            function: src/actions/shipping-methods/index.js
            web: 'yes'
            runtime: nodejs:22
            inputs:
              LOG_LEVEL: info

              # Runtime (auto)
              AIO_runtime_namespace: $AIO_runtime_namespace
              AIO_runtime_apihost: $AIO_runtime_apihost

              # Webhooks
              COMMERCE_WEBHOOKS_PUBLIC_KEY: $COMMERCE_WEBHOOKS_PUBLIC_KEY

              # Endpoint COMMERCE (SaaS or PaaS)
              COMMERCE_BASE_URL: $COMMERCE_BASE_URL

              # ---------- SaaS (IMS OAuth) ----------
              OAUTH_CLIENT_ID: $OAUTH_CLIENT_ID
              OAUTH_CLIENT_SECRET: $OAUTH_CLIENT_SECRET
              OAUTH_SCOPES: $OAUTH_SCOPES
              OAUTH_IMS_ORG_ID: $OAUTH_IMS_ORG_ID
              OAUTH_TECHNICAL_ACCOUNT_ID: $OAUTH_TECHNICAL_ACCOUNT_ID
              OAUTH_TECHNICAL_ACCOUNT_EMAIL: $OAUTH_TECHNICAL_ACCOUNT_EMAIL

              # ---------- PaaS (Commerce Integration) ----------
              COMMERCE_CONSUMER_KEY: $COMMERCE_CONSUMER_KEY
              COMMERCE_CONSUMER_SECRET: $COMMERCE_CONSUMER_SECRET
              COMMERCE_ACCESS_TOKEN: $COMMERCE_ACCESS_TOKEN
              COMMERCE_ACCESS_TOKEN_SECRET: $COMMERCE_ACCESS_TOKEN_SECRET

            annotations:
              require-adobe-auth: true
              raw-http: true
              final: true

extensions:
  commerce/backend-ui/1:
    $include: src/commerce-backend-ui-1/ext.config.yaml

productDependencies:
  - code: COMMC
    minVersion: 2.4.4
    maxVersion: 2.4.8
